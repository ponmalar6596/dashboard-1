(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[18],{"3Qy3":function(e,t,i){i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n}));const a=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5}),n=e=>{switch(!0){case e.includes("Chrome"):return a.CHROME;case e.includes("Safari"):return a.SAFARI;case e.includes("Firefox"):return a.FIREFOX;case e.includes("Opera"):return a.OPERA;case e.includes("IE"):return a.IE;default:return a.OTHER}}},"51gp":function(e,t,i){i.d(t,"a",(function(){return g}));var a=i("q1tI"),n=i.n(a),s=i("sEfC"),o=i.n(s),r=i("vYDk");var l=i("BEAQ"),h=i("9pre"),c=i("U4JR"),d=i("n6mq");function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const m=[0,.25,.5,.75,.95,.97],p=[0,.5,.8,1],y={threshold:p},b={rootMargin:"-64px 0px 0px 0px",threshold:h.c},v=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function f(){return(new Date).getTime()}function P(e){return!!e.volume&&e.volume>0}class g extends n.a.Component{constructor(e){super(e),u(this,"videoWrapperRef",n.a.createRef()),u(this,"handleWindowResize",()=>{if(!this.fullscreen){const e=this.getDimensions(),{height:t,width:i}=this.currentInterval;e.height!==t||e.width!==i?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}}),u(this,"handlePlayheadDown",({event:e})=>{const{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})}),u(this,"handlePlayheadUp",({event:e})=>{const{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})}),u(this,"handleLoop",()=>{this.videoTime=0}),u(this,"handleTimeChange",e=>{const{seeking:t,ready:i}=this.state;if(!this.currentInterval.videoDuration)return;const a=1e3*e.time,n=function(e,t,i,a){if(e>t)return null;if(i<=0)return null;for(const n of a){const a=n*i;if(e<=a&&t>a)return n}return null}(this.videoTime,a,this.currentInterval.videoDuration,m);if("number"==typeof n&&this.props.playing&&!t&&i){const e=f();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*n),quartilePercentValue:n})}this.videoTime=a,this.props.onTimeChange&&this.props.onTimeChange(e)}),u(this,"handleDurationChange",e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)}),u(this,"handleReady",e=>{const{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)}),u(this,"handleEnded",e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)}),u(this,"handleVisibilityChange",(e,t)=>{if(0===e.length)return;const i=e.slice(-1)[0],a=function(e,t){for(let i=0;i<t.length;i+=1){const a=t[i],n=t[i+1];if(null==n)return a;if(a<=e&&e<n)return a}return null}(Number.parseFloat(i.intersectionRatio.toFixed(2)),p);null==a||a===this.currentInterval.viewability||this.fullscreen||(0===a?this.startNewInterval({viewability:a,playbackState:v.PAUSED}):this.startNewInterval({viewability:a}))}),u(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{if(t){const{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})}),u(this,"handleClose",()=>{this.startNewInterval()}),u(this,"handleContextMenu",e=>{e.preventDefault()}),this.state={ready:!1,seeking:!1};const t=f();this.handleWindowResize=o()(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:P(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){const i={};P(e)&&!P(this.props)?i.isAudible=!1:!P(e)&&P(this.props)&&(i.isAudible=!0);const a=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==a&&(i.playbackState=a),Object.keys(i).length>0&&this.startNewInterval(i)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?v.PLAYING:v.PAUSED:v.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){const i=this.videoWrapperRef.current;i.clientHeight&&i.clientWidth&&(e=i.clientHeight,t=i.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){const{contextLogData:i}=this.props,{height:a,width:n,windowHeight:s,windowWidth:o,viewability:r,...l}=t;if(null!=a&&null!=n&&null!=s&&null!=o&&null!=r){const t={...l,height:a,width:n,windowHeight:s,windowWidth:o,viewability:r};Object(c.b)(e,function(e){const{eventData:{videoEvent:{videoDuration:t,startTime:i,endTime:a,videoStartTime:n,videoEndTime:s,isAudible:o,height:r,width:l,playbackState:h,quartile:c,quartilePercentValue:d,windowHeight:u,windowWidth:m,viewability:p}},...y}=e;return{...y,eventData:{videoEventData:{videoDuration:t,time:i,endTime:a,videoTime:n,endVideoTime:s,isAudible:o,height:r,width:l,playbackState:h,quartile:c,quartilePercentValue:d,windowHeight:u,windowWidth:m,viewability:p}}}}({...i,view:this.fullscreen?108:i.view,eventData:{videoEvent:t}}))}}logFourthQuartileEvent(){const e=f();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}startNewInterval(e){const t=f();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:h,captions:c,contextLogData:d,controls:u,cropHeight:m,hlsConfig:p,inAdsDesktopVideoExperiment:v,loop:f,objectFit:P,onLoadedChange:g,onPause:T,onPlay:w,onSeek:L,onVolumeChange:R,playbackRate:D,playing:S,playsInline:E,poster:C,preload:I,rootMargin:k,src:M,videoStartTime:V,volume:A}=this.props,{seeking:F}=this.state,O=v?b:y;return void 0!==k&&(O.rootMargin=k),n.a.createElement(r.a,{options:O,onVisibilityChange:this.handleVisibilityChange},n.a.createElement("div",{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu,style:m?{display:"flex",alignItems:"center",height:"236px"}:{}},n.a.createElement(l.a,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:h,captions:c,contextLogData:d,controls:u,hlsConfig:p,loop:f,objectFit:P,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:g,onLoop:this.handleLoop,onPause:T,onPlay:w,onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onSeek:L,onTimeChange:this.handleTimeChange,onVolumeChange:R,playbackRate:D,playing:!F&&S,playsInline:E,poster:C,preload:I,src:M,videoStartTime:V,volume:A})))}}u(g,"defaultProps",d.bb.defaultProps)},"9pre":function(e,t,i){i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s}));const a=5,n="V_HLSV3_MOBILE",s=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1]},BEAQ:function(e,t,i){i.d(t,"b",(function(){return p})),i.d(t,"a",(function(){return y}));var a=i("q1tI"),n=i.n(a),s=i("PioT"),o=i("U4JR"),r=i("n6mq");function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const h=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,SEEKING:3,STALLING:4,FAILED:5}),c=1e3;class d extends a.Component{constructor(...e){super(...e),l(this,"state",{canPlay:!1}),l(this,"componentDidMount",()=>{this.props.playing&&(this.videoVisibleTime=new Date)}),l(this,"componentDidUpdate",e=>{!1===e.playing&&this.props.playing&&(this.videoVisibleTime=new Date,this.state.canPlay&&this.setStartupReadyTime())}),l(this,"setStartupReadyTime",()=>{!this.playbackPerformance.startupReadyTimeMs&&this.videoVisibleTime&&(this.playbackPerformance.startupReadyTimeMs=new Date-this.videoVisibleTime)}),l(this,"setVideoPlayerRef",e=>{const{setVideoRef:t}=this.props;if(e&&(t(e),this.videoPlayerRef=e,this.videoRefSetTime=new Date,this.videoPlayerRef.video&&this.videoRefSetTime)){const e=this.videoPlayerRef.video,t=this.videoRefSetTime;e.addEventListener("error",()=>{this.playbackPerformance.fatalErrorMsg="Video failed loading"}),e.addEventListener("loadeddata",()=>{this.playbackPerformance.startupLoadTimeMs||(this.playbackPerformance.startupLoadTimeMs=new Date-t)}),e.addEventListener("pause",()=>{this.playbackState=h.PAUSED}),e.addEventListener("waiting",()=>{null!=this.startPlayTime&&(this.playbackPerformance.totalPlayDuration+=this.currentVideoTime-this.startPlayTime,this.startPlayTime=null),this.playbackState!==h.STALLING&&(this.playbackPerformance.numStalls+=1,this.stallTimestamp=new Date),this.playbackState=h.STALLING}),e.readyState>=3&&this.setState({canPlay:!0})}}),l(this,"startVideoPlaybackTimings",()=>{const e=()=>{null!=this.stallTimestamp&&(this.playbackPerformance.totalStallDurationMs+=new Date-this.stallTimestamp,this.stallTimestamp=null)};window.clearInterval(this.videoPlaybackIntervalId),this.videoPlaybackIntervalId=window.setInterval(()=>{if(!this.videoPlayerRef||!this.videoPlayerRef.video)return;const t=this.videoPlayerRef.video.currentTime,i=t*c;if(-1===this.currentVideoTime)return void(this.currentVideoTime=t);const a=i-(this.currentVideoTime*c+250);Math.abs(a)>200?(Math.abs(i-this.currentVideoTime*c)<200&&this.playbackState!==h.PAUSED?this.stallTimestamp||(this.playbackPerformance.numStalls+=1,this.stallTimestamp=new Date):this.stallTimestamp&&e(),null!=this.startPlayTime&&(this.playbackPerformance.totalPlayDuration+=this.currentVideoTime-this.startPlayTime,this.startPlayTime=null)):(this.playbackState=h.PLAYING,null==this.startPlayTime&&(this.startPlayTime=this.currentVideoTime),this.stallTimestamp&&e()),this.currentVideoTime=t},250)}),l(this,"currentVideoTime",-1),l(this,"playbackState",h.LOADING),l(this,"stallTimestamp",null),l(this,"startPlayTime",null),l(this,"videoRefSetTime",null),l(this,"videoVisibleTime",null),l(this,"playbackPerformance",{fatalErrorMsg:null,numStalls:0,startupLoadTimeMs:null,startupReadyTimeMs:null,totalPlayDuration:0,totalStallDurationMs:0}),l(this,"handleCanPlay",e=>{const{onReady:t,playing:i,videoStartTime:a}=this.props,{canPlay:n}=this.state;n||(i&&this.setStartupReadyTime(),null!=a&&this.videoPlayerRef&&this.videoPlayerRef.video&&(this.videoPlayerRef.video.currentTime=a),this.startVideoPlaybackTimings(),this.setState({canPlay:!0})),t&&t(e)}),l(this,"handleSeek",e=>{const{onSeek:t}=this.props;this.playbackState=h.SEEKING,t&&t(e)})}componentWillUnmount(){const{contextLogData:e,src:t}=this.props,i=this.videoPlayerRef&&this.videoPlayerRef.video,a=this.videoRefSetTime;if(i&&a){const a="string"==typeof t?t:t[0].src;null!=this.startPlayTime&&(this.playbackPerformance.totalPlayDuration+=this.currentVideoTime-this.startPlayTime,this.startPlayTime=null),null!=this.stallTimestamp&&(this.playbackPerformance.totalStallDurationMs+=new Date-this.stallTimestamp,this.stallTimestamp=null),Object(o.b)(3606,{...e,eventData:{videoPerformanceData:{isCellular:!1,fatalError:this.playbackPerformance.fatalErrorMsg||void 0,nativeVideoDurationMs:i.duration*c,numberOfStalls:this.playbackPerformance.numStalls,overallWatchedDurationMs:this.playbackPerformance.totalPlayDuration*c,rebufferRate:this.playbackPerformance.totalStallDurationMs/(this.playbackPerformance.totalPlayDuration*c),startupLatencyMs:this.playbackPerformance.startupReadyTimeMs||-1,startupPlayerHeight:i.clientHeight,startupPlayerWidth:i.clientWidth,startupTimeMs:this.playbackPerformance.startupLoadTimeMs||-1,videoUrl:a}}})}window.clearInterval(this.videoPlaybackIntervalId)}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:l,captions:h,controls:c,loop:d,objectFit:u,onDurationChange:m,onEnded:p,onFullscreenChange:y,onLoadedChange:b,onPause:v,onPlay:f,onPlayheadDown:P,onPlayheadUp:g,onTimeChange:T,onVolumeChange:w,playbackRate:L,playing:R,playsInline:D,poster:S,preload:E,src:C,volume:I}=this.props,{canPlay:k}=this.state;return n.a.createElement(r.bb,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:l,captions:h,controls:c,loop:d,objectFit:u,onDurationChange:m,onEnded:p,onFullscreenChange:y,onLoadedChange:b,onPause:v,onPlay:f,onPlayheadDown:P,onPlayheadUp:g,onReady:this.handleCanPlay,onSeek:this.handleSeek,onTimeChange:T,onVolumeChange:w,playbackRate:L,playing:k&&R,playsInline:D,poster:S,preload:E,ref:this.setVideoPlayerRef,src:C,volume:I})}}var u=i("aFfM");function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p=e=>{if(Array.isArray(e)){const t=e.find(e=>"video/m3u8"===e.type);return t?t.src:void 0}return RegExp("m3u8$").test(e)?e:void 0};class y extends n.a.PureComponent{constructor(e){super(e),m(this,"componentDidUpdate",(e,t)=>{var i;e.videoStartTime&&this.props.videoStartTime&&e.videoStartTime<this.props.videoStartTime&&(null===(i=this.videoPlayerRef)||void 0===i?void 0:i.video)&&(this.videoPlayerRef.video.currentTime=this.props.videoStartTime)}),m(this,"setVideoPlayerRef",e=>{e&&(this.videoPlayerRef=e)}),m(this,"handleOnEnded",({event:e})=>{const{loop:t,onLoop:i,onEnded:a}=this.props;a&&(a({event:e}),this.videoPlayerRef&&this.videoPlayerRef.video&&t&&(this.videoPlayerRef.video.play(),i&&i()))});const t=p(e.src);this.state={useHlsVideo:!s.b.isSafari()&&!!t}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:l,contextLogData:h,controls:c,hlsConfig:m,loop:y,objectFit:b,onDurationChange:v,onEnded:f,onFullscreenChange:P,onLoadedChange:g,onPause:T,onPlay:w,onPlayheadDown:L,onPlayheadUp:R,onReady:D,onSeek:S,onTimeChange:E,onVolumeChange:C,playbackRate:I,playing:k,playsInline:M,poster:V,preload:A,src:F,videoStartTime:O,volume:U}=this.props,{useHlsVideo:W}=this.state,x=p(F),H={...m,startPosition:O||-1},z=!f&&y;return W&&x?n.a.createElement(u.a,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:l,contextLogData:h,controls:c,hlsConfig:H,loop:z,onDurationChange:v,onEnded:this.handleOnEnded,onFullscreenChange:P,onLoadedChange:g,onPause:T,onPlay:w,onPlayheadDown:L,onPlayheadUp:R,onReady:D,onSeek:S,onTimeChange:E,onVolumeChange:C,playbackRate:I,playing:k,playsInline:M,poster:V,preload:A,setVideoRef:this.setVideoPlayerRef,src:x,volume:U}):n.a.createElement(d,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:l,contextLogData:h,controls:c,loop:z,objectFit:b,onDurationChange:v,onEnded:this.handleOnEnded,onFullscreenChange:P,onLoadedChange:g,onPause:T,onPlay:w,onPlayheadDown:L,onPlayheadUp:R,onReady:D,onSeek:S,onTimeChange:E,onVolumeChange:C,playbackRate:I,playing:k,playsInline:M,poster:V,preload:A,setVideoRef:this.setVideoPlayerRef,src:x||F,videoStartTime:O,volume:U})}}},GsvW:function(e,t,i){i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return o})),i.d(t,"d",(function(){return r})),i.d(t,"c",(function(){return l})),i.d(t,"f",(function(){return h})),i.d(t,"e",(function(){return c}));var a=i("pWkb"),n=i("Ye/N");const s=656,o=464,r=60,l=170,h=e=>{const t=new Date(e),i=(new Date).getTime()-t.getTime();return Math.floor(i/1e3)<60?n.a._("now","timestamp for a comment or post that was created within the last minute","timestamp for a comment or post that was created within the last minute"):Object(a.a)(e,{isAbbreviated:!0})},c=e=>{const t=e.first_name||e.full_name||e.username;return t&&t.length>r?t.substring(0,r).trim().concat("..."):t}},PioT:function(e,t,i){var a=i("+NLT"),n=i("3Qy3");i.d(t,"a",(function(){return n.a}));const s={getBrowser:()=>Object(n.b)(a.a.instance.browser_name||""),isSafari(){return this.getBrowser()===n.a.SAFARI},isChrome(){return this.getBrowser()===n.a.CHROME},isFirefox(){return this.getBrowser()===n.a.FIREFOX}};t.b=s},aFfM:function(e,t,i){i.d(t,"a",(function(){return u}));var a=i("q1tI"),n=i.n(a),s=i("ulZh"),o=i.n(s),r=i("U4JR"),l=i("n6mq");function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const c=1e3;function d(){return(new Date).getTime()}class u extends n.a.PureComponent{constructor(...e){super(...e),h(this,"state",{canPlayVideo:!1,isManifestParsed:!1}),h(this,"setVideoPlayerRef",e=>{const{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){const e=this.videoPlayerRef.video;e.addEventListener("canplay",()=>{this.setState({canPlayVideo:!0})}),e.readyState>=3&&this.setState({canPlayVideo:!0})}}),h(this,"currentVideoTime",0),h(this,"hls",null),h(this,"playbackPerformance",{fatalErrorMsg:"",firstLevelFetchTime:0,firstFragmentParsedTime:0,hasFatalError:!1,levelWatchDurationsMs:[],numStalls:0,rebufferingDurationMs:0,videoCreatedTime:0}),h(this,"initializeHls",()=>{this.destroyHls();const{src:e,hlsConfig:t}=this.props,i=new o.a(t);i.loadSource(e),this.videoPlayerRef&&i.attachMedia(this.videoPlayerRef.video),i.on(o.a.Events.MANIFEST_PARSED,()=>{this.setState({isManifestParsed:!0}),this.startVideoWatchTimings()}),i.on(o.a.Events.FRAG_PARSED,(e,t)=>{this.playbackPerformance.firstFragmentParsedTime||(this.playbackPerformance.firstFragmentParsedTime=d())}),i.on(o.a.Events.LEVEL_LOADING,(e,t)=>{this.playbackPerformance.firstLevelFetchTime||(this.playbackPerformance.firstLevelFetchTime=d())}),i.on(o.a.Events.ERROR,(e,t)=>{t.fatal&&(this.playbackPerformance.hasFatalError=!0,this.playbackPerformance.fatalErrorMsg=t.details),t.details===o.a.ErrorDetails.BUFFER_STALLED_ERROR&&(this.playbackPerformance.numStalls+=1,t.buffer&&(this.playbackPerformance.rebufferingDurationMs+=t.buffer*c))}),this.hls=i}),h(this,"destroyHls",()=>{const{hls:e}=this;e&&e.destroy(),window.clearInterval(this.videoTimeIntervalId)}),h(this,"startVideoWatchTimings",()=>{window.clearInterval(this.videoTimeIntervalId),this.videoTimeIntervalId=window.setInterval(()=>{if(!this.hls||this.hls.currentLevel<=0||!this.videoPlayerRef||!this.videoPlayerRef.video)return;const e=this.videoPlayerRef.video.currentTime*c,{levelWatchDurationsMs:t}=this.playbackPerformance;if(t.length){if(this.hls.currentLevel!==t[t.length-1].level){const i=t.length-1;t[i].duration+=this.currentVideoTime-t[i].lastStartSegmentTime,t.push({level:this.hls.currentLevel,lastStartSegmentTime:e,duration:0})}else if(e<this.currentVideoTime||e-this.currentVideoTime>300){const i=t.length-1;t[i].duration+=this.currentVideoTime-t[i].lastStartSegmentTime,t[i].lastStartSegmentTime=e}}else t.push({level:this.hls.currentLevel,lastStartSegmentTime:e,duration:0});this.currentVideoTime=e},250)})}componentDidMount(){this.playbackPerformance.videoCreatedTime=d(),this.initializeHls()}componentDidUpdate(e){const{src:t}=this.props;var i,a;(typeof(i=e.src)!=typeof(a=t)||(Array.isArray(a)?i.length!==a.length||a.some((e,t)=>!Array.isArray(i)||e.type!==i[t].type||e.src!==i[t].src):a!==i))&&this.initializeHls()}componentWillUnmount(){const{contextLogData:e,src:t}=this.props,{firstLevelFetchTime:i,firstFragmentParsedTime:a,hasFatalError:n,levelWatchDurationsMs:s,numStalls:o,rebufferingDurationMs:l,videoCreatedTime:h}=this.playbackPerformance,d=this.videoPlayerRef&&this.videoPlayerRef.video;if(this.hls&&d&&s.length>0){const u="string"==typeof t?t:t[0].src,m=this.hls.levels,p=m[s[0].level]||{},y=d.currentTime*c;s[s.length-1].duration+=y-s[s.length-1].lastStartSegmentTime;const b=s.reduce((e,t)=>e+t.level*(m[t.level]||{}).bitrate*(t.duration||0)/c,0),v=s.reduce((e,t)=>e+(t.duration||0),0);Object(r.b)(3606,{...e,eventData:{videoPerformanceData:{startupTimeMs:a-i,startupLatencyMs:a-h,nativeVideoDurationMs:d.duration*c,startupVariantKbps:p.bitrate/1e3,startupPlayerWidth:d.clientWidth,startupPlayerHeight:d.clientHeight,startupVariantWatchedDurationMs:s[0].duration,startupVariantWidth:p.width,isCellular:!1,fatalError:n,averageVideoKbps:b/(v/c),overallWatchedDurationMs:v,numberOfStalls:o,rebufferRate:l/v,videoUrl:u}}})}this.destroyHls()}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:h,controls:c,loop:d,onDurationChange:u,onEnded:m,onFullscreenChange:p,onLoadedChange:y,onPause:b,onPlay:v,onPlayheadDown:f,onPlayheadUp:P,onReady:g,onSeek:T,onTimeChange:w,onVolumeChange:L,playbackRate:R,playing:D,playsInline:S,poster:E,preload:C,src:I,volume:k}=this.props,{canPlayVideo:M,isManifestParsed:V}=this.state;return n.a.createElement(l.bb,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:h,controls:c,loop:d,onDurationChange:u,onEnded:m,onFullscreenChange:p,onLoadedChange:y,onPause:b,onPlay:v,onPlayheadDown:f,onPlayheadUp:P,onReady:g,onSeek:T,onTimeChange:w,onVolumeChange:L,playbackRate:R,playing:V&&M&&D,playsInline:S,poster:E,preload:C,ref:this.setVideoPlayerRef,src:I,volume:k})}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/18-597729d43b53d47cff31.mjs.map